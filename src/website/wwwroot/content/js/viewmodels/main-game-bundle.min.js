!function(e){var a=this;a.homeTeamID=ko.observable(0),a.homeTeamInfo=ko.computed((function(){return"undefined"===a.homeTeamID()||a.homeTeamID()<=0?new MODULES.Constructors.TeamArrayRecord:e.grep(MODULES.GameVariables.Teams,(function(e){return e.teamId===a.homeTeamID()}))[0]})),a.homeTeamTimeOuts=ko.observable(3),a.homeTeamScore=ko.observable(0)}(jQuery),function(e){var a=this;a.awayTeamID=ko.observable(0),a.awayTeamInfo=ko.computed((function(){return"undefined"===a.awayTeamID()||a.awayTeamID()<=0?new MODULES.Constructors.TeamArrayRecord:e.grep(MODULES.GameVariables.Teams,(function(e){return e.teamId===a.awayTeamID()}))[0]})),a.awayTeamTimeOuts=ko.observable(3),a.awayTeamScore=ko.observable(0)}(jQuery),function(e){var a=this;a.SetupField=function(){console.log("SETTING UP FIELD"),e("#end-zone-left-img").addClass(a.homeTeamInfo().teamBgColor()),e("#end-zone-right-img").addClass(a.awayTeamInfo().teamBgColor()),e("#end-zone-left-txt").css("top",a.GetHomeTeamTextPosition(a.homeTeamInfo().teamName().length)+"%"),e("#end-zone-right-txt").css("top",a.GetAwayTeamTextPosition(a.awayTeamInfo().teamName().length)+"%"),a.SetBallPosition()},a.SetBallPosition=function(){console.log("SETTING BALL POSITION"),e("#ball-position-img").css("margin-left",a.ballSpot()+"px")},a.GetHomeTeamTextPosition=function(e){let a=58;switch(e){case 5:a=60;break;case 6:a=64;break;case 7:a=68;break;case 8:a=70;break;case 9:a=72;break;case 10:a=74}return a},a.GetAwayTeamTextPosition=function(e){let a=42;switch(e){case 5:a=40;break;case 6:a=36;break;case 7:a=34;break;case 8:a=30;break;case 9:a=28;break;case 10:a=26}return a}}(jQuery),function(e){var a=this;a.ballSpotStart=ko.observable(0),a.yardsTraveled=ko.observable(0),a.yardsToFirst=ko.observable(10),a.yardsToTouchdown=ko.computed((function(){return 100-(a.ballSpotStart()+a.yardsTraveled())})),a.currentBallSpot=ko.computed((function(){let e=a.yardsToTouchdown();return e>50&&(e=100-e),e})),a.currentTeamWithBall=ko.observable(0),a.SetupKickoffBallSpot=function(){if(console.log("SETTING UP KICKOFF BALL SPOT"),console.log("isExtraPointKick: %s, isKickoff: %s, isSafety: %s",isExtraPointKick(),isKickoff(),isSafety()),isExtraPointKick()||isKickoff()||isSafety()){let e=MODULES.Constants.KICKOFF_SPOT;isKickoff()&&(console.log("SPOT BEFORE CHANGE (KICKOFF): %s",e),e+=30),isSafety()&&(e=MODULES.Constants.SAFETY_KICKOFF_SPOT,console.log("SPOT BEFORE CHANGE (SAFETY): %s",e),e+=60),isExtraPointKick()&&(e=MODULES.Constants.EXTRA_POINT_KICK_SPOT,console.log("SPOT BEFORE CHANGE (EXTRA POINT): %s",e)),a.ballSpotStart(e)}return console.log("just return ball spot: %s",a.ballSpotStart()),a.SetBallPosition(),a.ballSpotStart()},a.ballSpot=ko.computed((function(){let t=!1,o=0,r=180;a.currentTeamWithBall()===a.homeTeamID()&&(t=!0,r=-4),o=t?r+1.8*(100-a.yardsToTouchdown())+1:1.8*a.yardsToTouchdown()-1;let n=1.8*a.yardsTraveled();if(t)e("#away-team-trail").css("width","0px"),e("#home-team-trail").css("background-image","linear-gradient(to right, rgba(255,255,255,0), rgba(255,255,255,1)"),e("#home-team-trail").css("width",n+"px"),e("#home-team-trail").css("margin-left",1.8*a.ballSpotStart()+"px");else{let t=181-n-1.8*a.ballSpotStart();e("#home-team-trail").css("width","0px"),e("#away-team-trail").css("background-image","linear-gradient(to left, rgba(255,255,255,0), rgba(255,255,255,1)"),e("#away-team-trail").css("width",n+"px"),e("#away-team-trail").css("margin-left",t+"px")}return o})),a.ChangePossession=function(){a.yardsToFirst(10),a.currentDown(1),a.playCountForPossession(1),a.timeOfPossession(0),a.currentTeamWithBall()===a.awayTeamID()?a.currentTeamWithBall(a.homeTeamID()):a.currentTeamWithBall(a.awayTeamID())}}(jQuery),function(e){var a=this;a.needCoinToss=ko.observable(!0),a.ClearCoinColors=function(){e(".side-a").removeClass(a.homeTeamInfo().teamBgColor()),e(".side-b").removeClass(a.homeTeamInfo().teamBgColor()),e(".side-a").removeClass(a.awayTeamInfo().teamBgColor()),e(".side-b").removeClass(a.awayTeamInfo().teamBgColor())},a.ChooseCoinSide=function(){return a.ClearCoinColors(),1===parseInt(e("input[name=selectCoinSide]:checked").val(),10)?(e(".side-a").addClass(a.awayTeamInfo().teamBgColor()),e("#side-a-txt").text(a.awayTeamInfo().teamName()),e(".side-b").addClass(a.homeTeamInfo().teamBgColor()),e("#side-b-txt").text(a.homeTeamInfo().teamName())):(e(".side-b").addClass(a.awayTeamInfo().teamBgColor()),e("#side-b-txt").text(a.awayTeamInfo().teamName()),e(".side-a").addClass(a.homeTeamInfo().teamBgColor()),e("#side-a-txt").text(a.homeTeamInfo().teamName())),!0},a.coinTossValue=ko.observable(0).extend({throttle:4e3}),a.coinTossWinner=ko.observable(0),a.coinTossLoser=ko.observable(0),a.coinTossWinningOption=ko.observable("receive"),a.coinTossResultText=ko.computed((function(){return 1===a.coinTossValue()?"Heads":"Tails"})),a.coinTossWinnerInfo=ko.computed((function(){return a.coinTossWinner()===a.homeTeamID()?a.homeTeamInfo():a.awayTeamInfo()})),a.TossCoin=function(){let t=UTILITIES.getRandomInt(1,2),o=parseInt(e("input[name=selectCoinSide]:checked").val(),10);e("#coin").unbind().click((function(){})),e("#coin").removeClass(),setTimeout((function(){1===t?e("#coin").addClass("heads"):e("#coin").addClass("tails")}),100),a.coinTossValue(t),t===o?(a.coinTossWinner(a.awayTeamID()),a.coinTossLoser(a.homeTeamID())):(a.coinTossWinner(a.homeTeamID()),a.coinTossLoser(a.awayTeamID())),a.SelectCoinTossWinningOption()},a.SelectCoinTossWinningOption=function(){let t=e("input[name=selectCoinTossWinner]:checked").val();console.log("COIN TOSS WINNING OPTION: %s",t),a.coinTossWinningOption(t),"receive"===t?a.teamReceivingInitialKickoff(a.coinTossWinner()):a.teamReceivingInitialKickoff(a.coinTossLoser())}}(jQuery),function(e){var a=this;a.currentQuarter=ko.observable(1),a.timeOfPossession=ko.observable(0),a.isBeginningOfHalf=!0,a.timerId=0,a.elapsedTime=ko.observable(0),a.initialTime=ko.observable(MODULES.Constants.MAX_TIME_OF_QUARTER),a.isRunning=ko.observable(!1),a.currentQuarterDisplay=ko.computed((function(){return UTILITIES.getNumberWithEnding(a.currentQuarter())})),a.currentTeamHasTimeOuts=ko.computed((function(){return a.currentTeamWithBall()===a.awayTeamID()&&a.awayTeamTimeOuts()>0||a.currentTeamWithBall()===a.homeTeamID()&&a.homeTeamTimeOuts()>0})),a.remainingTime=ko.computed((function(){return a.initialTime()-a.elapsedTime()})),a.remainingTimeDisplay=ko.computed((function(){return UTILITIES.getTimeDisplay(a.remainingTime())})),a.StartCounter=function(){a.isRunning(!0),a.timerId=window.setInterval((function(){a.elapsedTime(a.elapsedTime()+1),0===a.remainingTime()&&(clearInterval(a.timerId),a.isRunning(!1),a.Callback())}),MODULES.GameVariables.TimeIntervalCountDown)},a.StopCounter=function(){clearInterval(a.timerId),a.isRunning(!1)},a.Callback=function(){},a.CallTimeout=function(){console.log("TODO: Setup Timeout functionality."),a.currentTeamHasTimeOuts()?a.currentTeamWithBall()===a.awayTeamID()?a.awayTeamTimeOuts(a.awayTeamTimeOuts()-1):a.homeTeamTimeOuts(a.homeTeamTimeOuts()-1):alert("No Timeouts Remaining")}}(jQuery),function(e){var a=this;a.gameStarted=ko.observable(!1),a.currentDown=ko.observable(1),a.playCountForPossession=ko.observable(1),a.gameSimulated=ko.observable(!1),a.teamsPicked=ko.computed((function(){let e=!1;return homeTeamID()&&awayTeamID()&&homeTeamID()>0&&awayTeamID()>0&&(e=!0),a.ChooseCoinSide(),e})),a.SelectTeam=function(){let t=parseInt(e("input[name=selectTeam]:checked").val(),10);t===a.homeTeamID()?alert("The away team must be different than the home team.  Please select a different team."):(a.ClearCoinColors(),"number"==typeof t&&(a.homeTeamID()?a.awayTeamID(t):a.homeTeamID(t)))},a.StartGame=function(){a.currentTeamWithBall(a.teamReceivingInitialKickoff()),a.pointAttemptAfterTouchDown(!1),a.SetupField(),a.isKickoff(!0),a.SetupKickoff(),a.gameStarted(!0),a.InitializeBoxScore(),a.InitializeGameStats()},a.ResetTeams=function(){a.ClearCoinColors(),a.homeTeamID(0),a.awayTeamID(0),a.gameSimulated(!1),console.log("TEAMS RESET")},a.CloseSpecialTeamsMenu=function(){e("#specialTeamsMenu").removeClass(MODULES.Constants.SHOW_SPECIAL_TEAMS_CLASS)},a.ShowHideSpecialTeamsMenu=function(){4===a.currentDown()?e("#specialTeamsMenu").addClass(MODULES.Constants.SHOW_SPECIAL_TEAMS_CLASS):e("#specialTeamsMenu").removeClass(MODULES.Constants.SHOW_SPECIAL_TEAMS_CLASS)}}(jQuery),function(e){var a=this;a.gameBoxScore=ko.observableArray(),a.InitializeBoxScore=function(){let e=new MODULES.Constructors.GameBoxScoreRecord(a.homeTeamID(),a.homeTeamInfo().teamName(),0,0,0,0,0,0),t=new MODULES.Constructors.GameBoxScoreRecord(a.awayTeamID(),a.awayTeamInfo().teamName(),0,0,0,0,0,0);a.gameBoxScore.push(e),a.gameBoxScore.push(t)},a.UpdateBoxScore=function(){let t=a.currentQuarter(),o=e.grep(a.gameBoxScore(),(function(e){return e.teamId===a.homeTeamID()}))[0],r=e.grep(a.gameBoxScore(),(function(e){return e.teamId===a.awayTeamID()}))[0];a.gameBoxScore().length>0?(1===t&&(o.firstQuarterScore=a.homeTeamScore(),r.firstQuarterScore=a.awayTeamScore()),2===t&&(o.secondQuarterScore=a.homeTeamScore()-o.firstQuarterScore,r.secondQuarterScore=a.awayTeamScore()-r.firstQuarterScore),3===t&&(o.thirdQuarterScore=a.homeTeamScore()-o.firstQuarterScore-o.secondQuarterScore,r.thirdQuarterScore=a.awayTeamScore()-r.firstQuarterScore-r.secondQuarterScore),4===t&&(o.fourthQuarterScore=a.homeTeamScore()-o.firstQuarterScore-o.secondQuarterScore-o.thirdQuarterScore,r.fourthQuarterScore=a.awayTeamScore()-r.firstQuarterScore-r.secondQuarterScore-r.thirdQuarterScore),t>=5&&(o.overtimeScore=a.homeTeamScore()-o.firstQuarterScore-o.secondQuarterScore-o.thirdQuarterScore-o.fourthQuarterScore,r.overtimeScore=a.awayTeamScore()-r.firstQuarterScore-r.secondQuarterScore-r.thirdQuarterScore-r.fourthQuarterScore),a.gameBoxScore.refresh(o)):(console.log("ERROR: gameBoxScore array was never initialized. Initializing..."),a.InitializeBoxScore(),console.log("Updating Box Score..."),a.UpdateBoxScore())}}(jQuery),function(e){var a=this;a.gamePlayStats=ko.observableArray(),a.InitializeGameStats=function(){let e=new MODULES.Constructors.GamePlayStatRecord(a.homeTeamID(),a.homeTeamInfo().teamName(),0,0,0,0,0,0),t=new MODULES.Constructors.GamePlayStatRecord(a.awayTeamID(),a.awayTeamInfo().teamName(),0,0,0,0,0,0);a.gamePlayStats.push(e),a.gamePlayStats.push(t)},a.UpdateGameStat=function(t){if(a.gamePlayStats().length>0){let o=e.grep(a.gamePlayStats(),(function(e){return e.teamId===t.teamId}))[0];o.totalPlayCount+=t.totalPlayCount,o.totalYardsRushing+=t.totalYardsRushing,o.totalYardsPassing+=t.totalYardsPassing,o.totalTimePossession+=t.totalTimePossession,o.totalTurnovers+=t.totalTurnovers,o.totalFirstDowns+=t.totalFirstDowns,a.gamePlayStats.refresh(o)}else console.log("ERROR: gamePlayStats array was never initialized. Initializing..."),a.InitializeGameStats(),console.log("Updating Box Score..."),a.UpdateGameStat()},a.ShowOtherGameInfo=function(){e("#gameInfoBox").is(":hidden")?e("#gameInfoBox").show("slow"):e("#gameInfoBox").slideUp()},e("#gameInfoBox").slideUp()}(jQuery);var gameDice={init:function(){gameDice.roll()},generateDie:function(e,a){let t={};return t.minValue=e,t.maxValue=a,t},getAllDice:function(){let e=[];for(var a=0;a<2;a++)e.push(gameDice.generateDie(1,6));return e},display:function(e,a){$("#diceValues").empty();for(var t=0,o=e.length;t<o;t++){let o=e[t],r=document.createElement("li"),n="Die "+(t+1)+" = "+o.valueRolled;r.appendChild(document.createTextNode(n)),$("#diceTotal").text(a),$("#diceValues").append(r)}},roll:function(){for(var e=gameDice.getAllDice(),a=0,t=0,o=e.length;t<o;t++){let o=e[t],r=UTILITIES.getRandomInt(o.minValue,o.maxValue);o.valueRolled=r,a+=r}MODULES.GameVariables.DiceSumTotal=a,gameDice.display(e,a)}};!function(e){var a=this;a.hasRolled=ko.observable(!1),a.RollDice=function(){gameDice.init(),a.hasRolled(!0)}}(jQuery);var playMaker={init:function(){playMaker.play()},initPlayAfterTouchdown:function(){playMaker.playAfterTouchdown()},display:function(e){$("#playResult").text(e),$("#playCount").text(MODULES.GameVariables.TotalPlayCount)},getPlayResult:function(e){let a=0,t=UTILITIES.splitAndTitleCase(e),o=!1,r=!1,n=UTILITIES.getRandomInt(1,100)>=85,s=15,l=!1;self.playCountForPossession(self.playCountForPossession()+1),n&&(s=self.yardsToTouchdown()),MODULES.GameVariables.DiceSumTotal>=7&&(o=!0),MODULES.GameVariables.DiceSumTotal<=3&&(r=!0),e===GAME_PLAY_TYPES.TWOPOINTCONVERSION&&(l=!0,self.isKickoff(!0),self.SetupKickoff(),e===GAME_PLAY_TYPES.TWOPOINTCONVERSION&&MODULES.GameVariables.DiceSumTotal>=6?(a=UTILITIES.getRandomInt(1,4),a>=MODULES.Constants.TWO_POINT_CONVERSION_SPOT?(t+=" SUCCESSFUL",playMaker.addScore(SCORE_TYPES.TWOPOINTCONVERSION)):t+=" FAILED"):e===GAME_PLAY_TYPES.TWOPOINTCONVERSION&&(t+=" FAILED")),o&&e===GAME_PLAY_TYPES.PASS&&(a=UTILITIES.getRandomInt(1,s),t+=" Complete"),o&&e===GAME_PLAY_TYPES.RUN&&(a=UTILITIES.getRandomInt(1,s),t+=" Successful"),r&&e===GAME_PLAY_TYPES.PASS&&(a=-1*UTILITIES.getRandomInt(1,15),t="Sacked for a loss"),r&&e===GAME_PLAY_TYPES.RUN&&(a=-1*UTILITIES.getRandomInt(1,15),t+=" - tackled for a loss"),o||r||e!==GAME_PLAY_TYPES.PASS||(t+=" Incomplete"),o||r||e!==GAME_PLAY_TYPES.RUN||(t+=" for no gain"),a>=self.yardsToTouchdown()&&(e===GAME_PLAY_TYPES.PASS||e===GAME_PLAY_TYPES.RUN)&&(t=SCORE_TYPES.TOUCHDOWN.toUpperCase(),playMaker.addScore(SCORE_TYPES.TOUCHDOWN),self.pointAttemptAfterTouchDown(!0)),self.yardsToTouchdown()>100&&(e===GAME_PLAY_TYPES.PASS||e===GAME_PLAY_TYPES.RUN)&&(t=SCORE_TYPES.SAFETY.toUpperCase(),playMaker.addScore(SCORE_TYPES.SAFETY),self.isSafety(!0),self.SetupKickoff(),l=!0),a>=self.yardsToFirst()&&(e===GAME_PLAY_TYPES.PASS||e===GAME_PLAY_TYPES.RUN)?(self.yardsToFirst(10),self.currentDown(1)):4===self.currentDown()?l=!0:(self.yardsToFirst(self.yardsToFirst()-a),self.currentDown(self.currentDown()+1)),console.log("YARDS: "+a);let i=new MODULES.Constructors.PlayResult(a,t,l,e);return"fieldGoal"!==e&&"extraPoint"!==e&&"twoPointConversion"!==e&&self.yardsTraveled(self.yardsTraveled()+a),self.SetBallPosition(),l&&(playMaker.recordPlay(i),a=0,self.ballSpotStart(self.yardsToTouchdown()),self.yardsTraveled(0),t+=" Change of Possession",self.ChangePossession()),self.ShowHideSpecialTeamsMenu(),i},kickoff:function(e,a){let t=getKickoffType(),o=convertKickoffPowerToYards(t,e,a),r=0,n=UTILITIES.splitAndTitleCase(t),s=MODULES.Constants.KICKOFF_SPOT,l=!1,i=!1,m=t===KICKOFF_TYPES.KICKOFF||t===KICKOFF_TYPES.ONSIDE||t===KICKOFF_TYPES.PUNT||t===KICKOFF_TYPES.SAFETY,c=UTILITIES.getRandomInt(1,100);console.log("kickoffPower: %s, kickoffAngle: %s",e,a),(self.isPunt()||self.isFieldGoal())&&(s=self.currentBallSpot()),self.isSafety()&&(s=MODULES.Constants.SAFETY_KICKOFF_SPOT),self.isExtraPointKick()&&(s=MODULES.Constants.EXTRA_POINT_KICK_SPOT);let T=100-s,f=T+11;console.log("BEGINNING Kickoff Yards: %s, totalMaxKickWithoutTouchback: %s, BALL KICK OFF SPOT: %s",o,T,s);let S=self.awayTeamID(),u=self.homeTeamID();if(self.isBeginningOfHalf&&self.teamReceivingInitialKickoff()===self.homeTeamID()&&(S=self.homeTeamID(),u=self.awayTeamID()),self.isBeginningOfHalf=!1,self.isBeginningOfHalf||self.currentTeamWithBall()===self.homeTeamID()&&(S=self.homeTeamID(),u=self.awayTeamID()),t===KICKOFF_TYPES.ONSIDE){let t=!1;t=e>=25&&(kickOffAngle<=20||a>=80),t?(o=UTILITIES.getRandomInt(10,20),UTILITIES.getRandomInt(1,100)<=20?S=u:r=UTILITIES.getRandomInt(1,100)<=5?UTILITIES.getRandomInt(1,10):0):e<25?(o=35,n+=" Unsuccessful - Ball did not travel proper distance.",i=!0):a>20||a<80?(r=UTILITIES.getRandomInt(1,o+s),n+=" Unsuccessful - Receiving team made a return."):(o=35,n+=" Unsuccessful - Ball went out of bounds.",i=!0)}else if(t===KICKOFF_TYPES.EXTRAPOINT||t===KICKOFF_TYPES.FIELDGOAL)c>6?o>s+MODULES.Constants.END_ZONE_YARDS?(n+=" GOOD",playMaker.addScore(t)):n+=" NO GOOD":n+=" Blocked";else if(console.log("HANDLE NORMAL KICKOFF/PUNT/SAFETY"),c<6&&t===KICKOFF_TYPES.PUNT)n+=" Blocked";else if(!(a<=20||a>=80)||t!==KICKOFF_TYPES.SAFETY&&t!==KICKOFF_TYPES.KICKOFF)if(o>=f)l=!0;else if(console.log("Kickoff Yards: %s, totalMaxKickWithoutTouchback: %s",o,T),o>=T)if(UTILITIES.getRandomInt(1,100)>=85){let e=o-T,a=40,t=UTILITIES.getRandomInt(1,100);console.log("Chance of big return: %s, Minimum Return Yards: %s, Maximum Return Yards: %s",t,e,a),t>=90?(a=o+s,r=UTILITIES.getRandomInt(e,a)):r=UTILITIES.getRandomInt(e,a)}else l=!0;else console.log("Chance of normal return, Minimum Return Yards: %s, Maximum Return Yards: %s",1,o+s),r=UTILITIES.getRandomInt(1,o+s);else o=35,n+=" Penalty - Ball kicked out of bounds.",i=!0;console.log("Kickoff type: %s, Kickoff distance: %s, kickoff return: %s, TeamID With Ball: %s",t,o,r,S);let I=new MODULES.Constructors.PlayResult(o,n);if(self.currentTeamWithBall(u),playMaker.recordPlay(I),m){let e="Kickoff Return";if(l||i)l&&(e+=" - TOUCHBACK",o=MODULES.Constants.TOUCHBACK_YARD_LINE),self.ballSpotStart(o);else{let e=100-s+o-r;console.log("BALL SPOT TOTAL: %s",e),self.ballSpotStart(100-e)}let a=new MODULES.Constructors.PlayResult(r,e);self.currentTeamWithBall(S),playMaker.recordPlay(a)}self.SetBallPosition(),playMaker.resetKickoffFlags(t),m||(self.yardsToFirst(10),self.currentDown(1),self.isKickoff(!0),self.SetupKickoff())},resetKickoffFlags:function(e){self.showKickoffControls(!1),e===KICKOFF_TYPES.KICKOFF||e===KICKOFF_TYPES.ONSIDE?self.isKickoff(!1):e===KICKOFF_TYPES.EXTRAPOINT?self.isExtraPointKick(!1):e===KICKOFF_TYPES.SAFETY?self.isSafety(!1):e===KICKOFF_TYPES.FIELDGOAL?self.isFieldGoal(!1):e===KICKOFF_TYPES.PUNT&&self.isPunt(!1)},recordTimeOfPossession:function(e,a){let t=0;t+=5,e===GAME_PLAY_TYPES.RUN&&(t+=Math.round(a/2)),e===GAME_PLAY_TYPES.PASS&&(t+=2,t+=Math.round(a/10),t+=Math.round(a/4/2)),console.log("TIME OF POSSESSION: %s",self.timeOfPossession()),t=Math.round(t),self.timeOfPossession(t)},recordPlay:function(e){let a=$.grep(MODULES.GameVariables.Teams,(function(e){return e.teamId===self.currentTeamWithBall()}))[0],t="s";1!==e.yards&&-1!==e.yards||(t="");let o=e.yards.toString()+" Yard"+t;console.log("This Play:"+e.playResultText+" by the "+a.teamName()+" for "+o),self.AddPlayHistory(new MODULES.Constructors.PlayHistory(self.teamPlayHistory().length+1,self.currentTeamWithBall(),a.teamName(),HELPERS.getDownText(self.currentDown(),self.yardsToFirst()),self.playCountForPossession(),o,e.playResultText,HELPERS.getYardText())),playMaker.display(e.playResultText+" for "+e.yards.toString()+" Yard"+t),this.recordTimeOfPossession(e.playSelected,e.yards),this.recordGameStats(a,e)},recordGameStats:function(e,a){let t=new MODULES.Constructors.GamePlayStatRecord(e.teamId,e.teamName,1,0,0,self.timeOfPossession(),0,0);a.playType===GAME_PLAY_TYPES.RUN&&(t.totalYardsRushing=a.yards),a.playType===GAME_PLAY_TYPES.PASS&&(t.totalYardsPassing=a.yards),a.isTurnover&&(t.totalTurnovers=1),self.UpdateGameStat(t)},play:function(){let e=$("input[name=selectPlay]:checked").val();if(e){self.hasRolled(!1),$("#diceValues").empty();let a=playMaker.getPlayResult(e);playMaker.recordPlay(a),MODULES.GameVariables.TotalPlayCount+=1}else self.hasRolled(!0),alert("Choose a play")},playAfterTouchdown:function(){let e=$("input[name=afterTDPlay]:checked").val(),a=MODULES.Constants.EXTRA_POINT_KICK_SPOT;self.yardsTraveled(0),self.pointAttemptAfterTouchDown(!1),e===GAME_PLAY_TYPES.EXTRAPOINT?(self.isExtraPointKick(!0),self.SetupKickoff()):e===GAME_PLAY_TYPES.TWOPOINTCONVERSION&&(a=MODULES.Constants.TWO_POINT_CONVERSION_SPOT),self.ballSpotStart(a),self.SetBallPosition()},addScore:function(e){let a=0;switch(e){case SCORE_TYPES.TOUCHDOWN:a=6;break;case SCORE_TYPES.FIELDGOAL:a=3;break;case SCORE_TYPES.EXTRAPOINT:a=1;break;case SCORE_TYPES.SAFETY,SCORE_TYPES.TWOPOINTCONVERSION:a=2}currentTeamWithBall()===homeTeamID()?e===SCORE_TYPES.SAFETY?awayTeamScore(awayTeamScore()+a):homeTeamScore(homeTeamScore()+a):e===SCORE_TYPES.SAFETY?homeTeamScore(homeTeamScore()+a):awayTeamScore(awayTeamScore()+a),self.UpdateBoxScore()}};function getKickoffType(){let e=$("input[name=selectKickoffPlay]:checked").val();return self.isPunt()?e=KICKOFF_TYPES.PUNT:self.isFieldGoal()?e=KICKOFF_TYPES.FIELDGOAL:self.isSafety()?e=KICKOFF_TYPES.SAFETY:self.isExtraPointKick()&&(e=KICKOFF_TYPES.EXTRAPOINT),e}function convertKickoffPowerToYards(e,a,t){let o=0,r=0;if(e===KICKOFF_TYPES.EXTRAPOINT)r=a>=60?31:a>=40?29:a>=25?25:a;else if(e===KICKOFF_TYPES.ONSIDE)r=a>=90?UTILITIES.getRandomInt(66,75):a>=85?65:a>=70?UTILITIES.getRandomInt(50,64):a>=60?UTILITIES.getRandomInt(40,50):a>=50?UTILITIES.getRandomInt(30,40):a>=40?UTILITIES.getRandomInt(20,30):a>=30?UTILITIES.getRandomInt(10,20):UTILITIES.getRandomInt(1,10);else if(e===KICKOFF_TYPES.PUNT)r=a;else if(e===KICKOFF_TYPES.FIELDGOAL){let e=0;self.yardsToTouchdown()>=40?e=1:self.yardsToTouchdown()>=30?e=2:self.yardsToTouchdown()>=20?e=4:self.yardsToTouchdown()>=10?e=6:self.yardsToTouchdown()>=5?e=8:self.yardsToTouchdown()>=4?e=9:self.yardsToTouchdown()>=1&&(e=10),r=a>=90?UTILITIES.getRandomInt(60,70):a>=80?UTILITIES.getRandomInt(50,60):a>=70?UTILITIES.getRandomInt(40,50):a>=60?UTILITIES.getRandomInt(30,40):a>=50?UTILITIES.getRandomInt(20,30):a>=40?UTILITIES.getRandomInt(10,20):UTILITIES.getRandomInt(1,10),r+=e}else{let t=e===KICKOFF_TYPES.SAFETY?100-MODULES.Constants.SAFETY_KICKOFF_SPOT:100-MODULES.Constants.KICKOFF_SPOT;r=a>=98?t+11:a>=80?UTILITIES.getRandomInt(t+1,t+10):a>=75?t:a>=70?UTILITIES.getRandomInt(t-15,t-1):a>=60?UTILITIES.getRandomInt(t-25,t-15):a>=50?UTILITIES.getRandomInt(t-35,t-25):a>=40?UTILITIES.getRandomInt(t-45,t-35):a>=30?UTILITIES.getRandomInt(t-55,t-45):UTILITIES.getRandomInt(1,t-55)}return t<=0||t>=100?o=Math.round(r/2.8):t<=10||t>=90?o=Math.round(r/3.8):t<=20||t>=80?o=Math.round(r/4.8):t<=30||t>=70?o=Math.round(r/5.8):(t<=40||t>=60)&&(o=Math.round(r/6.8)),console.log("KICKOFF: Type: %s, Power: %s, Angle: %s, Angle subtractor: %s, Yards: ",e,a,t,o,r),r-o}!function(e){var a=this;a.teamPlayHistory=ko.observableArray(),a.AddPlayHistory=function(e){a.teamPlayHistory.push(e),a.teamPlayHistory.sort((function(e,a){return a.playId===e.playId?0:a.playId<e.playId?-1:1}))},a.MakePlay=function(){playMaker.init(),e("input[name=selectPlay][value=pass]").prop("checked","checked")},a.MakePlayAfterTD=function(){playMaker.initPlayAfterTouchdown(),e("input[name=afterTDPlay][value=extraPoint]").prop("checked","checked")}}(jQuery),function(e){var a=this;a.pointAttemptAfterTouchDown=ko.observable(!1),a.showKickoffControls=ko.observable(!0),a.isKickoff=ko.observable(!1),a.isSafety=ko.observable(!1),a.isPunt=ko.observable(!1),a.isFieldGoal=ko.observable(!1),a.isExtraPointKick=ko.observable(!1),a.teamReceivingInitialKickoff=ko.observable(0),a.teamReceivingInitialKickoffInfo=ko.computed((function(){return a.teamReceivingInitialKickoff()===a.homeTeamID()?a.homeTeamInfo():a.awayTeamInfo()})),a.kickoffPowerSliderIntervalId=0,a.kickoffAngleSliderIntervalId=0,a.kickoffPower=-1,a.kickoffAngle=-1,a.GetKickoffPower=function(){var t=parseInt(e("#kickoffPower").val(),10);e("#kickoffPower").prop("disabled",!0),clearInterval(a.kickoffPowerSliderIntervalId),e("#kickoffPowerSelected").text(t),a.kickoffPower=t},a.GetKickoffAngle=function(){var t=parseInt(e("#kickoffAngle").val(),10);e("#kickoffAngle").prop("disabled",!0),clearInterval(a.kickoffAngleSliderIntervalId),e("#kickoffAngleSelected").text(t),a.kickoffAngle=t},a.Kickoff=function(){console.log("kickoffPowerSelected: %s kickoffAngleSelected: %s",a.kickoffPower,a.kickoffAngle),a.kickoffPower>=0&&a.kickoffAngle>=0?playMaker.kickoff(kickoffPower,kickoffAngle):alert("Select kick power and angle")},a.SetupKickoff=function(){a.showKickoffControls(!0);let t=1,o=0;e("#kickoffPower").prop("disabled",!1),e("#kickoffAngle").prop("disabled",!1),a.kickoffPower=-1,a.kickoffAngle=-1,e("#kickoffAngleSelected").text("select angle"),e("#kickoffPowerSelected").text("select power"),a.SetupKickoffBallSpot(),a.kickoffPowerSliderIntervalId=window.setInterval((function(){e("#kickoffPower").val(o+=1*t),100===o&&(t=-1),0===o&&(t=1)}),MODULES.GameVariables.KickoffSliderDifficulty),a.kickoffAngleSliderIntervalId=window.setInterval((function(){e("#kickoffAngle").val(o+=1*t),100===o&&(t=-1),0===o&&(t=1)}),MODULES.GameVariables.KickoffSliderDifficulty)},a.PuntBall=function(){a.isPunt(!0),a.SetupKickoff()},a.KickFieldGoal=function(){a.isFieldGoal(!0),a.SetupKickoff()}}(jQuery);var gameStorage={storageAvailable:function(e){try{var a=window[e],t="__storage_test__";return a.setItem(t,t),a.removeItem(t),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==a.length}},clearLocalStorage:function(){localStorage.clear(),console.log("STORAGE CLEARED!")},populateStorage:function(e,a){localStorage.setItem(e,a),console.log(e+" saved a value of "+a)},getStorage:function(e){return localStorage.getItem(e)},getArrayStorage:function(e){return JSON.parse(localStorage.getItem(e))},saveGetData:function(e,a,t){t||!localStorage.getItem(e)?(gameStorage.populateStorage(e,a),console.log("item: %s, data: %s",e,a)):localStorage.getItem(e)&&gameStorage.getStorage(e)},getAllStorage:function(){console.log("========STORAGE=========");let e=gameStorage.getStorage("currentQuarter"),a=gameStorage.getStorage("currentDown"),t=gameStorage.getStorage("ballSpotStart"),o=gameStorage.getStorage("yardsTraveled"),r=gameStorage.getStorage("yardsToFirst"),n=gameStorage.getStorage("currentTeamWithBall"),s=gameStorage.getArrayStorage("teamPlayHistory"),l=gameStorage.getStorage("homeTeamID"),i=gameStorage.getStorage("homeTeamTimeOuts"),m=gameStorage.getStorage("homeTeamScore"),c=gameStorage.getStorage("awayTeamID"),T=gameStorage.getStorage("awayTeamTimeOuts"),f=gameStorage.getStorage("awayTeamScore");console.log("currentQuarter: "+e),console.log("currentDown: "+a),console.log("ballSpotStart: "+t),console.log("yardsTraveled: "+o),console.log("yardsToFirst: "+r),console.log("currentTeamWithBall: "+n),console.log("teamPlayHistory ARRAY: "+s),console.log("homeTeamID: "+l),console.log("homeTeamTimeOuts: "+i),console.log("homeTeamScore: "+m),console.log("awayTeamID: "+c),console.log("awayTeamTimeOuts: "+T),console.log("awayTeamScore: "+f),console.log("========END STORAGE========="),self.currentQuarter(e),self.currentDown(a),self.ballSpotStart(t),self.yardsTraveled(o),self.yardsToFirst(r),self.currentTeamWithBall(n),s&&self.teamPlayHistory(s),self.homeTeamID(l),self.homeTeamTimeOuts(i),self.homeTeamScore(m),self.awayTeamID(c),self.awayTeamTimeOuts(T),self.awayTeamScore(f)},saveGame:function(){gameStorage.saveGetData("currentQuarter",self.currentQuarter(),!0),gameStorage.saveGetData("currentDown",self.currentDown(),!0),gameStorage.saveGetData("ballSpotStart",self.ballSpotStart(),!0),gameStorage.saveGetData("yardsTraveled",self.yardsTraveled(),!0),gameStorage.saveGetData("yardsToFirst",self.yardsToFirst(),!0),gameStorage.saveGetData("currentTeamWithBall",self.currentTeamWithBall(),!0),gameStorage.saveGetData("teamPlayHistory",JSON.stringify(self.teamPlayHistory()),!0),gameStorage.saveGetData("homeTeamID",self.homeTeamID(),!0),gameStorage.saveGetData("homeTeamTimeOuts",self.homeTeamTimeOuts(),!0),gameStorage.saveGetData("homeTeamScore",self.homeTeamScore(),!0),gameStorage.saveGetData("awayTeamID",self.awayTeamID(),!0),gameStorage.saveGetData("awayTeamTimeOuts",self.awayTeamTimeOuts(),!0),gameStorage.saveGetData("awayTeamScore",self.awayTeamScore(),!0),gameStorage.getAllStorage()},getSavedData:function(){gameStorage.storageAvailable("localStorage")?gameStorage.getAllStorage():console.log("localStorage is not available")}};!function(e){this.ResetGame=function(){gameStorage.clearLocalStorage()},this.SaveGame=function(){gameStorage.saveGame()},this.GetGameSaves=function(){gameStorage.getSavedData()}}(jQuery);var sim={simGame:function(){let e=sim.simScore();self.homeTeamScore(e.team1.total),self.awayTeamScore(e.team2.total),sim.displayBoxScore(e),console.log(`Home Team: (${self.homeTeamInfo().teamCityAndName()}): ${e.team1.total}, Quarters: ${e.team1.quarters}, Overtime: ${e.team1.overtime}`),console.log(`Away Team: (${self.awayTeamInfo().teamCityAndName()}): ${e.team2.total}, Quarters: ${e.team2.quarters}, Overtime: ${e.team2.overtime}`)},simScore:function(){function e(){const e=[0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],a=[.15,.005,.15,.005,.005,.1,.15,.005,.005,.1,.005,.01,.01,.1,.01,.005,.005,.005,.005,.005,.005,.002,.001,.001,.001,.001,.001,.001,.001,.001,.001,.001,.001,.001,.001,.001,.001,.001,.001,.001,.001,.001,.001],t=Math.random();let o=0;for(let r=0;r<e.length;r++)if(o+=a[r],t<o)return e[r];return 0}function a(){const e=[0,2,3,6],a=[.1,.001,.4495,.4495],t=Math.random();let o=0;for(let r=0;r<e.length;r++)if(o+=a[r],t<o)return e[r];return 0}function t(){let a=[];for(let t=0;t<4;t++){let t;do{t=e()}while(1===t||2===t&&Math.random()<.9);a.push(t)}return a}let o=t(),r=t();o=o.map(e=>e+Math.round(.05*e));let n=o.reduce((e,a)=>e+a,0),s=r.reduce((e,a)=>e+a,0),l=null;if(n===s){let e=1===UTILITIES.getRandomInt(1,2);l={team1:a(),team2:a()},1===l.team1&&(l.team1=3),1===l.team2&&(l.team2=3),(6===l.team1&&6===l.team2||2===l.team1&&2===l.team2)&&(1===e?l.team2=0:l.team1=0)}return{team1:{total:n+(l?l.team1:0),quarters:o,overtime:l?l.team1:null},team2:{total:s+(l?l.team2:0),quarters:r,overtime:l?l.team2:null}}},displayBoxScore:function(e){let a=[];a.push(new MODULES.Constructors.GameBoxScoreRecord(self.homeTeamID(),self.homeTeamInfo().teamName(),e.team1.quarters[0],e.team1.quarters[1],e.team1.quarters[2],e.team1.quarters[3],e.team1.overtime,e.team1.total)),a.push(new MODULES.Constructors.GameBoxScoreRecord(self.awayTeamID(),self.awayTeamInfo().teamName(),e.team2.quarters[0],e.team2.quarters[1],e.team2.quarters[2],e.team2.quarters[3],e.team2.overtime,e.team2.total)),self.simBoxScore(a),console.log("SIM BOX SCORE:",self.simBoxScore())}};!function(e){var a=this;a.simBoxScore=ko.observableArray(),a.SimGame=function(){a.gameSimulated(!0),sim.simGame()}}(jQuery),$((function(){ko.applyBindings()}));
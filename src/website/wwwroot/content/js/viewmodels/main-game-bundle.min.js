!function(e){var a=this;a.homeTeamID=ko.observable(0),a.homeTeamInfo=ko.computed((function(){return"undefined"===a.homeTeamID()||a.homeTeamID()<=0?new MODULES.Constructors.TeamArrayRecord:e.grep(MODULES.GameVariables.Teams,(function(e){return e.teamId===a.homeTeamID()}))[0]})),a.homeTeamTimeOuts=ko.observable(3),a.homeTeamScore=ko.observable(0)}(jQuery),function(e){var a=this;a.awayTeamID=ko.observable(0),a.awayTeamInfo=ko.computed((function(){return"undefined"===a.awayTeamID()||a.awayTeamID()<=0?new MODULES.Constructors.TeamArrayRecord:e.grep(MODULES.GameVariables.Teams,(function(e){return e.teamId===a.awayTeamID()}))[0]})),a.awayTeamTimeOuts=ko.observable(3),a.awayTeamScore=ko.observable(0)}(jQuery),function(e){var a=this;a.SetupField=function(){console.log("SETTING UP FIELD"),e("#end-zone-left-img").addClass(a.homeTeamInfo().teamBgColor()),e("#end-zone-right-img").addClass(a.awayTeamInfo().teamBgColor()),e("#end-zone-left-txt").css("top",a.GetHomeTeamTextPosition(a.homeTeamInfo().teamName().length)+"%"),e("#end-zone-right-txt").css("top",a.GetAwayTeamTextPosition(a.awayTeamInfo().teamName().length)+"%"),a.SetBallPosition()},a.SetBallPosition=function(){console.log("SETTING BALL POSITION"),e("#ball-position-img").css("margin-left",a.ballSpot()+"px")},a.GetHomeTeamTextPosition=function(e){let a=58;switch(e){case 5:a=60;break;case 6:a=64;break;case 7:a=68;break;case 8:a=70;break;case 9:a=72;break;case 10:a=74}return a},a.GetAwayTeamTextPosition=function(e){let a=42;switch(e){case 5:a=40;break;case 6:a=36;break;case 7:a=34;break;case 8:a=30;break;case 9:a=28;break;case 10:a=26}return a}}(jQuery),function(e){var a=this;a.ballSpotStart=ko.observable(0),a.yardsTraveled=ko.observable(0),a.yardsToFirst=ko.observable(10),a.yardsToTouchdown=ko.computed((function(){return 100-(a.ballSpotStart()+a.yardsTraveled())})),a.currentBallSpot=ko.computed((function(){let e=a.yardsToTouchdown();return e>50&&(e=100-e),e})),a.currentTeamWithBall=ko.observable(0),a.SetupKickoffBallSpot=function(){if(console.log("SETTING UP KICKOFF BALL SPOT"),console.log("isExtraPointKick: %s, isKickoff: %s, isSafety: %s",isExtraPointKick(),isKickoff(),isSafety()),isExtraPointKick()||isKickoff()||isSafety()){let e=MODULES.Constants.KICKOFF_SPOT;isKickoff()&&(console.log("SPOT BEFORE CHANGE (KICKOFF): %s",e),e+=30),isSafety()&&(e=MODULES.Constants.SAFETY_KICKOFF_SPOT,console.log("SPOT BEFORE CHANGE (SAFETY): %s",e),e+=60),isExtraPointKick()&&(e=MODULES.Constants.EXTRA_POINT_KICK_SPOT,console.log("SPOT BEFORE CHANGE (EXTRA POINT): %s",e)),a.ballSpotStart(e)}return console.log("just return ball spot: %s",a.ballSpotStart()),a.SetBallPosition(),a.ballSpotStart()},a.ballSpot=ko.computed((function(){let o=!1,t=0,r=180;a.currentTeamWithBall()===a.homeTeamID()&&(o=!0,r=-4),t=o?r+1.8*(100-a.yardsToTouchdown())+1:1.8*a.yardsToTouchdown()-1;let n=1.8*a.yardsTraveled();if(o)e("#away-team-trail").css("width","0px"),e("#home-team-trail").css("background-image","linear-gradient(to right, rgba(255,255,255,0), rgba(255,255,255,1)"),e("#home-team-trail").css("width",n+"px"),e("#home-team-trail").css("margin-left",1.8*a.ballSpotStart()+"px");else{let o=181-n-1.8*a.ballSpotStart();e("#home-team-trail").css("width","0px"),e("#away-team-trail").css("background-image","linear-gradient(to left, rgba(255,255,255,0), rgba(255,255,255,1)"),e("#away-team-trail").css("width",n+"px"),e("#away-team-trail").css("margin-left",o+"px")}return t})),a.ChangePossession=function(){a.yardsToFirst(10),a.currentDown(1),a.playCountForPossession(1),a.timeOfPossession(0),a.currentTeamWithBall()===a.awayTeamID()?a.currentTeamWithBall(a.homeTeamID()):a.currentTeamWithBall(a.awayTeamID())}}(jQuery),function(e){var a=this;a.needCoinToss=ko.observable(!0),a.ClearCoinColors=function(){e(".side-a").removeClass(a.homeTeamInfo().teamBgColor()),e(".side-b").removeClass(a.homeTeamInfo().teamBgColor()),e(".side-a").removeClass(a.awayTeamInfo().teamBgColor()),e(".side-b").removeClass(a.awayTeamInfo().teamBgColor())},a.ChooseCoinSide=function(){return a.ClearCoinColors(),1===parseInt(e("input[name=selectCoinSide]:checked").val(),10)?(e(".side-a").addClass(a.awayTeamInfo().teamBgColor()),e("#side-a-txt").text(a.awayTeamInfo().teamName()),e(".side-b").addClass(a.homeTeamInfo().teamBgColor()),e("#side-b-txt").text(a.homeTeamInfo().teamName())):(e(".side-b").addClass(a.awayTeamInfo().teamBgColor()),e("#side-b-txt").text(a.awayTeamInfo().teamName()),e(".side-a").addClass(a.homeTeamInfo().teamBgColor()),e("#side-a-txt").text(a.homeTeamInfo().teamName())),!0},a.coinTossValue=ko.observable(0).extend({throttle:4e3}),a.coinTossWinner=ko.observable(0),a.coinTossLoser=ko.observable(0),a.coinTossWinningOption=ko.observable("receive"),a.coinTossResultText=ko.computed((function(){return 1===a.coinTossValue()?"Heads":"Tails"})),a.coinTossWinnerInfo=ko.computed((function(){return a.coinTossWinner()===a.homeTeamID()?a.homeTeamInfo():a.awayTeamInfo()})),a.TossCoin=function(){let o=UTILITIES.getRandomInt(1,2),t=parseInt(e("input[name=selectCoinSide]:checked").val(),10);e("#coin").unbind().click((function(){})),e("#coin").removeClass(),setTimeout((function(){1===o?e("#coin").addClass("heads"):e("#coin").addClass("tails")}),100),a.coinTossValue(o),o===t?(a.coinTossWinner(a.awayTeamID()),a.coinTossLoser(a.homeTeamID())):(a.coinTossWinner(a.homeTeamID()),a.coinTossLoser(a.awayTeamID())),a.SelectCoinTossWinningOption()},a.SelectCoinTossWinningOption=function(){let o=e("input[name=selectCoinTossWinner]:checked").val();console.log("COIN TOSS WINNING OPTION: %s",o),a.coinTossWinningOption(o),"receive"===o?a.teamReceivingInitialKickoff(a.coinTossWinner()):a.teamReceivingInitialKickoff(a.coinTossLoser())}}(jQuery),function(e){var a=this;a.currentQuarter=ko.observable(1),a.timeOfPossession=ko.observable(0),a.isBeginningOfHalf=!0,a.timerId=0,a.elapsedTime=ko.observable(0),a.initialTime=ko.observable(MODULES.Constants.MAX_TIME_OF_QUARTER),a.isRunning=ko.observable(!1),a.currentQuarterDisplay=ko.computed((function(){return UTILITIES.getNumberWithEnding(a.currentQuarter())})),a.currentTeamHasTimeOuts=ko.computed((function(){return a.currentTeamWithBall()===a.awayTeamID()&&a.awayTeamTimeOuts()>0||a.currentTeamWithBall()===a.homeTeamID()&&a.homeTeamTimeOuts()>0})),a.remainingTime=ko.computed((function(){return a.initialTime()-a.elapsedTime()})),a.remainingTimeDisplay=ko.computed((function(){return UTILITIES.getTimeDisplay(a.remainingTime())})),a.StartCounter=function(){a.isRunning(!0),a.timerId=window.setInterval((function(){a.elapsedTime(a.elapsedTime()+1),0===a.remainingTime()&&(clearInterval(a.timerId),a.isRunning(!1),a.Callback())}),MODULES.GameVariables.TimeIntervalCountDown)},a.StopCounter=function(){clearInterval(a.timerId),a.isRunning(!1)},a.Callback=function(){},a.CallTimeout=function(){console.log("TODO: Setup Timeout functionality."),a.currentTeamHasTimeOuts()?a.currentTeamWithBall()===a.awayTeamID()?a.awayTeamTimeOuts(a.awayTeamTimeOuts()-1):a.homeTeamTimeOuts(a.homeTeamTimeOuts()-1):alert("No Timeouts Remaining")}}(jQuery),function(e){var a=this;a.gameStarted=ko.observable(!1),a.currentDown=ko.observable(1),a.playCountForPossession=ko.observable(1),a.teamsPicked=ko.computed((function(){let e=!1;return homeTeamID()&&awayTeamID()&&homeTeamID()>0&&awayTeamID()>0&&(e=!0),a.ChooseCoinSide(),e})),a.SelectTeam=function(){let o=parseInt(e("input[name=selectTeam]:checked").val(),10);o===a.homeTeamID()?alert("The away team must be different than the home team.  Please select a different team."):(a.ClearCoinColors(),"number"==typeof o&&(a.homeTeamID()?a.awayTeamID(o):a.homeTeamID(o)))},a.StartGame=function(){a.currentTeamWithBall(a.teamReceivingInitialKickoff()),a.pointAttemptAfterTouchDown(!1),a.SetupField(),a.isKickoff(!0),a.SetupKickoff(),a.gameStarted(!0),a.InitializeBoxScore(),a.InitializeGameStats()},a.ResetTeams=function(){a.ClearCoinColors(),a.homeTeamID(0),a.awayTeamID(0),console.log("TEAMS RESET")},a.CloseSpecialTeamsMenu=function(){e("#specialTeamsMenu").removeClass(MODULES.Constants.SHOW_SPECIAL_TEAMS_CLASS)},a.ShowHideSpecialTeamsMenu=function(){4===a.currentDown()?e("#specialTeamsMenu").addClass(MODULES.Constants.SHOW_SPECIAL_TEAMS_CLASS):e("#specialTeamsMenu").removeClass(MODULES.Constants.SHOW_SPECIAL_TEAMS_CLASS)}}(jQuery),function(e){var a=this;a.gameBoxScore=ko.observableArray(),a.InitializeBoxScore=function(){let e=new MODULES.Constructors.GameBoxScoreRecord(a.homeTeamID(),a.homeTeamInfo().teamName(),0,0,0,0,0),o=new MODULES.Constructors.GameBoxScoreRecord(a.awayTeamID(),a.awayTeamInfo().teamName(),0,0,0,0,0);a.gameBoxScore.push(e),a.gameBoxScore.push(o)},a.UpdateBoxScore=function(){let o=a.currentQuarter(),t=e.grep(a.gameBoxScore(),(function(e){return e.teamId===a.homeTeamID()}))[0],r=e.grep(a.gameBoxScore(),(function(e){return e.teamId===a.awayTeamID()}))[0];a.gameBoxScore().length>0?(1===o&&(t.firstQuarterScore=a.homeTeamScore(),r.firstQuarterScore=a.awayTeamScore()),2===o&&(t.secondQuarterScore=a.homeTeamScore()-t.firstQuarterScore,r.secondQuarterScore=a.awayTeamScore()-r.firstQuarterScore),3===o&&(t.thirdQuarterScore=a.homeTeamScore()-t.firstQuarterScore-t.secondQuarterScore,r.thirdQuarterScore=a.awayTeamScore()-r.firstQuarterScore-r.secondQuarterScore),4===o&&(t.fourthQuarterScore=a.homeTeamScore()-t.firstQuarterScore-t.secondQuarterScore-t.thirdQuarterScore,r.fourthQuarterScore=a.awayTeamScore()-r.firstQuarterScore-r.secondQuarterScore-r.thirdQuarterScore),o>=5&&(t.overtimeScore=a.homeTeamScore()-t.firstQuarterScore-t.secondQuarterScore-t.thirdQuarterScore-t.fourthQuarterScore,r.overtimeScore=a.awayTeamScore()-r.firstQuarterScore-r.secondQuarterScore-r.thirdQuarterScore-r.fourthQuarterScore),a.gameBoxScore.refresh(t)):(console.log("ERROR: gameBoxScore array was never initialized. Initializing..."),a.InitializeBoxScore(),console.log("Updating Box Score..."),a.UpdateBoxScore())}}(jQuery),function(e){var a=this;a.gamePlayStats=ko.observableArray(),a.InitializeGameStats=function(){let e=new MODULES.Constructors.GamePlayStatRecord(a.homeTeamID(),a.homeTeamInfo().teamName(),0,0,0,0,0,0),o=new MODULES.Constructors.GamePlayStatRecord(a.awayTeamID(),a.awayTeamInfo().teamName(),0,0,0,0,0,0);a.gamePlayStats.push(e),a.gamePlayStats.push(o)},a.UpdateGameStat=function(o){if(a.gamePlayStats().length>0){let t=e.grep(a.gamePlayStats(),(function(e){return e.teamId===o.teamId}))[0];t.totalPlayCount+=o.totalPlayCount,t.totalYardsRushing+=o.totalYardsRushing,t.totalYardsPassing+=o.totalYardsPassing,t.totalTimePossession+=o.totalTimePossession,t.totalTurnovers+=o.totalTurnovers,t.totalFirstDowns+=o.totalFirstDowns,a.gamePlayStats.refresh(t)}else console.log("ERROR: gamePlayStats array was never initialized. Initializing..."),a.InitializeGameStats(),console.log("Updating Box Score..."),a.UpdateGameStat()},a.ShowOtherGameInfo=function(){e("#gameInfoBox").is(":hidden")?e("#gameInfoBox").show("slow"):e("#gameInfoBox").slideUp()},e("#gameInfoBox").slideUp()}(jQuery);var gameDice={init:function(){gameDice.roll()},generateDie:function(e,a){let o={};return o.minValue=e,o.maxValue=a,o},getAllDice:function(){let e=[];for(var a=0;a<2;a++)e.push(gameDice.generateDie(1,6));return e},display:function(e,a){$("#diceValues").empty();for(var o=0,t=e.length;o<t;o++){let t=e[o],r=document.createElement("li"),n="Die "+(o+1)+" = "+t.valueRolled;r.appendChild(document.createTextNode(n)),$("#diceTotal").text(a),$("#diceValues").append(r)}},roll:function(){for(var e=gameDice.getAllDice(),a=0,o=0,t=e.length;o<t;o++){let t=e[o],r=UTILITIES.getRandomInt(t.minValue,t.maxValue);t.valueRolled=r,a+=r}MODULES.GameVariables.DiceSumTotal=a,gameDice.display(e,a)}};!function(e){var a=this;a.hasRolled=ko.observable(!1),a.RollDice=function(){gameDice.init(),a.hasRolled(!0)}}(jQuery);var playMaker={init:function(){playMaker.play()},initPlayAfterTouchdown:function(){playMaker.playAfterTouchdown()},display:function(e){$("#playResult").text(e),$("#playCount").text(MODULES.GameVariables.TotalPlayCount)},getPlayResult:function(e){let a=0,o=UTILITIES.splitAndTitleCase(e),t=!1,r=!1,n=UTILITIES.getRandomInt(1,100)>=85,s=15,l=!1;self.playCountForPossession(self.playCountForPossession()+1),n&&(s=self.yardsToTouchdown()),MODULES.GameVariables.DiceSumTotal>=7&&(t=!0),MODULES.GameVariables.DiceSumTotal<=3&&(r=!0),e===GAME_PLAY_TYPES.TWOPOINTCONVERSION&&(l=!0,self.isKickoff(!0),self.SetupKickoff(),e===GAME_PLAY_TYPES.TWOPOINTCONVERSION&&MODULES.GameVariables.DiceSumTotal>=6?(a=UTILITIES.getRandomInt(1,4),a>=MODULES.Constants.TWO_POINT_CONVERSION_SPOT?(o+=" SUCCESSFUL",playMaker.addScore(SCORE_TYPES.TWOPOINTCONVERSION)):o+=" FAILED"):e===GAME_PLAY_TYPES.TWOPOINTCONVERSION&&(o+=" FAILED")),t&&e===GAME_PLAY_TYPES.PASS&&(a=UTILITIES.getRandomInt(1,s),o+=" Complete"),t&&e===GAME_PLAY_TYPES.RUN&&(a=UTILITIES.getRandomInt(1,s),o+=" Successful"),r&&e===GAME_PLAY_TYPES.PASS&&(a=-1*UTILITIES.getRandomInt(1,15),o="Sacked for a loss"),r&&e===GAME_PLAY_TYPES.RUN&&(a=-1*UTILITIES.getRandomInt(1,15),o+=" - tackled for a loss"),t||r||e!==GAME_PLAY_TYPES.PASS||(o+=" Incomplete"),t||r||e!==GAME_PLAY_TYPES.RUN||(o+=" for no gain"),a>=self.yardsToTouchdown()&&(e===GAME_PLAY_TYPES.PASS||e===GAME_PLAY_TYPES.RUN)&&(o=SCORE_TYPES.TOUCHDOWN.toUpperCase(),playMaker.addScore(SCORE_TYPES.TOUCHDOWN),self.pointAttemptAfterTouchDown(!0)),self.yardsToTouchdown()>100&&(e===GAME_PLAY_TYPES.PASS||e===GAME_PLAY_TYPES.RUN)&&(o=SCORE_TYPES.SAFETY.toUpperCase(),playMaker.addScore(SCORE_TYPES.SAFETY),self.isSafety(!0),self.SetupKickoff(),l=!0),a>=self.yardsToFirst()&&(e===GAME_PLAY_TYPES.PASS||e===GAME_PLAY_TYPES.RUN)?(self.yardsToFirst(10),self.currentDown(1)):4===self.currentDown()?l=!0:(self.yardsToFirst(self.yardsToFirst()-a),self.currentDown(self.currentDown()+1)),console.log("YARDS: "+a);let i=new MODULES.Constructors.PlayResult(a,o,l,e);return"fieldGoal"!==e&&"extraPoint"!==e&&"twoPointConversion"!==e&&self.yardsTraveled(self.yardsTraveled()+a),self.SetBallPosition(),l&&(playMaker.recordPlay(i),a=0,self.ballSpotStart(self.yardsToTouchdown()),self.yardsTraveled(0),o+=" Change of Possession",self.ChangePossession()),self.ShowHideSpecialTeamsMenu(),i},kickoff:function(e,a){let o=getKickoffType(),t=convertKickoffPowerToYards(o,e,a),r=0,n=UTILITIES.splitAndTitleCase(o),s=MODULES.Constants.KICKOFF_SPOT,l=!1,i=!1,c=o===KICKOFF_TYPES.KICKOFF||o===KICKOFF_TYPES.ONSIDE||o===KICKOFF_TYPES.PUNT||o===KICKOFF_TYPES.SAFETY,m=UTILITIES.getRandomInt(1,100);console.log("kickoffPower: %s, kickoffAngle: %s",e,a),(self.isPunt()||self.isFieldGoal())&&(s=self.currentBallSpot()),self.isSafety()&&(s=MODULES.Constants.SAFETY_KICKOFF_SPOT),self.isExtraPointKick()&&(s=MODULES.Constants.EXTRA_POINT_KICK_SPOT);let T=100-s,S=T+11;console.log("BEGINNING Kickoff Yards: %s, totalMaxKickWithoutTouchback: %s, BALL KICK OFF SPOT: %s",t,T,s);let f=self.awayTeamID(),u=self.homeTeamID();if(self.isBeginningOfHalf&&self.teamReceivingInitialKickoff()===self.homeTeamID()&&(f=self.homeTeamID(),u=self.awayTeamID()),self.isBeginningOfHalf=!1,self.isBeginningOfHalf||self.currentTeamWithBall()===self.homeTeamID()&&(f=self.homeTeamID(),u=self.awayTeamID()),o===KICKOFF_TYPES.ONSIDE){let o=!1;o=e>=25&&(kickOffAngle<=20||a>=80),o?(t=UTILITIES.getRandomInt(10,20),UTILITIES.getRandomInt(1,100)<=20?f=u:r=UTILITIES.getRandomInt(1,100)<=5?UTILITIES.getRandomInt(1,10):0):e<25?(t=35,n+=" Unsuccessful - Ball did not travel proper distance.",i=!0):a>20||a<80?(r=UTILITIES.getRandomInt(1,t+s),n+=" Unsuccessful - Receiving team made a return."):(t=35,n+=" Unsuccessful - Ball went out of bounds.",i=!0)}else if(o===KICKOFF_TYPES.EXTRAPOINT||o===KICKOFF_TYPES.FIELDGOAL)m>6?t>s+MODULES.Constants.END_ZONE_YARDS?(n+=" GOOD",playMaker.addScore(o)):n+=" NO GOOD":n+=" Blocked";else if(console.log("HANDLE NORMAL KICKOFF/PUNT/SAFETY"),m<6&&o===KICKOFF_TYPES.PUNT)n+=" Blocked";else if(!(a<=20||a>=80)||o!==KICKOFF_TYPES.SAFETY&&o!==KICKOFF_TYPES.KICKOFF)if(t>=S)l=!0;else if(console.log("Kickoff Yards: %s, totalMaxKickWithoutTouchback: %s",t,T),t>=T)if(UTILITIES.getRandomInt(1,100)>=85){let e=t-T,a=40,o=UTILITIES.getRandomInt(1,100);console.log("Chance of big return: %s, Minimum Return Yards: %s, Maximum Return Yards: %s",o,e,a),o>=90?(a=t+s,r=UTILITIES.getRandomInt(e,a)):r=UTILITIES.getRandomInt(e,a)}else l=!0;else console.log("Chance of normal return, Minimum Return Yards: %s, Maximum Return Yards: %s",1,t+s),r=UTILITIES.getRandomInt(1,t+s);else t=35,n+=" Penalty - Ball kicked out of bounds.",i=!0;console.log("Kickoff type: %s, Kickoff distance: %s, kickoff return: %s, TeamID With Ball: %s",o,t,r,f);let I=new MODULES.Constructors.PlayResult(t,n);if(self.currentTeamWithBall(u),playMaker.recordPlay(I),c){let e="Kickoff Return";if(l||i)l&&(e+=" - TOUCHBACK",t=MODULES.Constants.TOUCHBACK_YARD_LINE),self.ballSpotStart(t);else{let e=100-s+t-r;console.log("BALL SPOT TOTAL: %s",e),self.ballSpotStart(100-e)}let a=new MODULES.Constructors.PlayResult(r,e);self.currentTeamWithBall(f),playMaker.recordPlay(a)}self.SetBallPosition(),playMaker.resetKickoffFlags(o),c||(self.yardsToFirst(10),self.currentDown(1),self.isKickoff(!0),self.SetupKickoff())},resetKickoffFlags:function(e){self.showKickoffControls(!1),e===KICKOFF_TYPES.KICKOFF||e===KICKOFF_TYPES.ONSIDE?self.isKickoff(!1):e===KICKOFF_TYPES.EXTRAPOINT?self.isExtraPointKick(!1):e===KICKOFF_TYPES.SAFETY?self.isSafety(!1):e===KICKOFF_TYPES.FIELDGOAL?self.isFieldGoal(!1):e===KICKOFF_TYPES.PUNT&&self.isPunt(!1)},recordTimeOfPossession:function(e,a){let o=0;o+=5,e===GAME_PLAY_TYPES.RUN&&(o+=Math.round(a/2)),e===GAME_PLAY_TYPES.PASS&&(o+=2,o+=Math.round(a/10),o+=Math.round(a/4/2)),console.log("TIME OF POSSESSION: %s",self.timeOfPossession()),o=Math.round(o),self.timeOfPossession(o)},recordPlay:function(e){let a=$.grep(MODULES.GameVariables.Teams,(function(e){return e.teamId===self.currentTeamWithBall()}))[0],o="s";1!==e.yards&&-1!==e.yards||(o="");let t=e.yards.toString()+" Yard"+o;console.log("This Play:"+e.playResultText+" by the "+a.teamName()+" for "+t),self.AddPlayHistory(new MODULES.Constructors.PlayHistory(self.teamPlayHistory().length+1,self.currentTeamWithBall(),a.teamName(),HELPERS.getDownText(self.currentDown(),self.yardsToFirst()),self.playCountForPossession(),t,e.playResultText,HELPERS.getYardText())),playMaker.display(e.playResultText+" for "+e.yards.toString()+" Yard"+o),this.recordTimeOfPossession(e.playSelected,e.yards),this.recordGameStats(a,e)},recordGameStats:function(e,a){let o=new MODULES.Constructors.GamePlayStatRecord(e.teamId,e.teamName,1,0,0,self.timeOfPossession(),0,0);a.playType===GAME_PLAY_TYPES.RUN&&(o.totalYardsRushing=a.yards),a.playType===GAME_PLAY_TYPES.PASS&&(o.totalYardsPassing=a.yards),a.isTurnover&&(o.totalTurnovers=1),self.UpdateGameStat(o)},play:function(){let e=$("input[name=selectPlay]:checked").val();if(e){self.hasRolled(!1),$("#diceValues").empty();let a=playMaker.getPlayResult(e);playMaker.recordPlay(a),MODULES.GameVariables.TotalPlayCount+=1}else self.hasRolled(!0),alert("Choose a play")},playAfterTouchdown:function(){let e=$("input[name=afterTDPlay]:checked").val(),a=MODULES.Constants.EXTRA_POINT_KICK_SPOT;self.yardsTraveled(0),self.pointAttemptAfterTouchDown(!1),e===GAME_PLAY_TYPES.EXTRAPOINT?(self.isExtraPointKick(!0),self.SetupKickoff()):e===GAME_PLAY_TYPES.TWOPOINTCONVERSION&&(a=MODULES.Constants.TWO_POINT_CONVERSION_SPOT),self.ballSpotStart(a),self.SetBallPosition()},addScore:function(e){let a=0;switch(e){case SCORE_TYPES.TOUCHDOWN:a=6;break;case SCORE_TYPES.FIELDGOAL:a=3;break;case SCORE_TYPES.EXTRAPOINT:a=1;break;case SCORE_TYPES.SAFETY,SCORE_TYPES.TWOPOINTCONVERSION:a=2}currentTeamWithBall()===homeTeamID()?e===SCORE_TYPES.SAFETY?awayTeamScore(awayTeamScore()+a):homeTeamScore(homeTeamScore()+a):e===SCORE_TYPES.SAFETY?homeTeamScore(homeTeamScore()+a):awayTeamScore(awayTeamScore()+a),self.UpdateBoxScore()}};function getKickoffType(){let e=$("input[name=selectKickoffPlay]:checked").val();return self.isPunt()?e=KICKOFF_TYPES.PUNT:self.isFieldGoal()?e=KICKOFF_TYPES.FIELDGOAL:self.isSafety()?e=KICKOFF_TYPES.SAFETY:self.isExtraPointKick()&&(e=KICKOFF_TYPES.EXTRAPOINT),e}function convertKickoffPowerToYards(e,a,o){let t=0,r=0;if(e===KICKOFF_TYPES.EXTRAPOINT)r=a>=60?31:a>=40?29:a>=25?25:a;else if(e===KICKOFF_TYPES.ONSIDE)r=a>=90?UTILITIES.getRandomInt(66,75):a>=85?65:a>=70?UTILITIES.getRandomInt(50,64):a>=60?UTILITIES.getRandomInt(40,50):a>=50?UTILITIES.getRandomInt(30,40):a>=40?UTILITIES.getRandomInt(20,30):a>=30?UTILITIES.getRandomInt(10,20):UTILITIES.getRandomInt(1,10);else if(e===KICKOFF_TYPES.PUNT)r=a;else if(e===KICKOFF_TYPES.FIELDGOAL){let e=0;self.yardsToTouchdown()>=40?e=1:self.yardsToTouchdown()>=30?e=2:self.yardsToTouchdown()>=20?e=4:self.yardsToTouchdown()>=10?e=6:self.yardsToTouchdown()>=5?e=8:self.yardsToTouchdown()>=4?e=9:self.yardsToTouchdown()>=1&&(e=10),r=a>=90?UTILITIES.getRandomInt(60,70):a>=80?UTILITIES.getRandomInt(50,60):a>=70?UTILITIES.getRandomInt(40,50):a>=60?UTILITIES.getRandomInt(30,40):a>=50?UTILITIES.getRandomInt(20,30):a>=40?UTILITIES.getRandomInt(10,20):UTILITIES.getRandomInt(1,10),r+=e}else{let o=e===KICKOFF_TYPES.SAFETY?100-MODULES.Constants.SAFETY_KICKOFF_SPOT:100-MODULES.Constants.KICKOFF_SPOT;r=a>=98?o+11:a>=80?UTILITIES.getRandomInt(o+1,o+10):a>=75?o:a>=70?UTILITIES.getRandomInt(o-15,o-1):a>=60?UTILITIES.getRandomInt(o-25,o-15):a>=50?UTILITIES.getRandomInt(o-35,o-25):a>=40?UTILITIES.getRandomInt(o-45,o-35):a>=30?UTILITIES.getRandomInt(o-55,o-45):UTILITIES.getRandomInt(1,o-55)}return o<=0||o>=100?t=Math.round(r/2.8):o<=10||o>=90?t=Math.round(r/3.8):o<=20||o>=80?t=Math.round(r/4.8):o<=30||o>=70?t=Math.round(r/5.8):(o<=40||o>=60)&&(t=Math.round(r/6.8)),console.log("KICKOFF: Type: %s, Power: %s, Angle: %s, Angle subtractor: %s, Yards: ",e,a,o,t,r),r-t}!function(e){var a=this;a.teamPlayHistory=ko.observableArray(),a.AddPlayHistory=function(e){a.teamPlayHistory.push(e),a.teamPlayHistory.sort((function(e,a){return a.playId===e.playId?0:a.playId<e.playId?-1:1}))},a.MakePlay=function(){playMaker.init(),e("input[name=selectPlay][value=pass]").prop("checked","checked")},a.MakePlayAfterTD=function(){playMaker.initPlayAfterTouchdown(),e("input[name=afterTDPlay][value=extraPoint]").prop("checked","checked")}}(jQuery),function(e){var a=this;a.pointAttemptAfterTouchDown=ko.observable(!1),a.showKickoffControls=ko.observable(!0),a.isKickoff=ko.observable(!1),a.isSafety=ko.observable(!1),a.isPunt=ko.observable(!1),a.isFieldGoal=ko.observable(!1),a.isExtraPointKick=ko.observable(!1),a.teamReceivingInitialKickoff=ko.observable(0),a.teamReceivingInitialKickoffInfo=ko.computed((function(){return a.teamReceivingInitialKickoff()===a.homeTeamID()?a.homeTeamInfo():a.awayTeamInfo()})),a.kickoffPowerSliderIntervalId=0,a.kickoffAngleSliderIntervalId=0,a.kickoffPower=-1,a.kickoffAngle=-1,a.GetKickoffPower=function(){var o=parseInt(e("#kickoffPower").val(),10);e("#kickoffPower").prop("disabled",!0),clearInterval(a.kickoffPowerSliderIntervalId),e("#kickoffPowerSelected").text(o),a.kickoffPower=o},a.GetKickoffAngle=function(){var o=parseInt(e("#kickoffAngle").val(),10);e("#kickoffAngle").prop("disabled",!0),clearInterval(a.kickoffAngleSliderIntervalId),e("#kickoffAngleSelected").text(o),a.kickoffAngle=o},a.Kickoff=function(){console.log("kickoffPowerSelected: %s kickoffAngleSelected: %s",a.kickoffPower,a.kickoffAngle),a.kickoffPower>=0&&a.kickoffAngle>=0?playMaker.kickoff(kickoffPower,kickoffAngle):alert("Select kick power and angle")},a.SetupKickoff=function(){a.showKickoffControls(!0);let o=1,t=0;e("#kickoffPower").prop("disabled",!1),e("#kickoffAngle").prop("disabled",!1),a.kickoffPower=-1,a.kickoffAngle=-1,e("#kickoffAngleSelected").text("select angle"),e("#kickoffPowerSelected").text("select power"),a.SetupKickoffBallSpot(),a.kickoffPowerSliderIntervalId=window.setInterval((function(){e("#kickoffPower").val(t+=1*o),100===t&&(o=-1),0===t&&(o=1)}),MODULES.GameVariables.KickoffSliderDifficulty),a.kickoffAngleSliderIntervalId=window.setInterval((function(){e("#kickoffAngle").val(t+=1*o),100===t&&(o=-1),0===t&&(o=1)}),MODULES.GameVariables.KickoffSliderDifficulty)},a.PuntBall=function(){a.isPunt(!0),a.SetupKickoff()},a.KickFieldGoal=function(){a.isFieldGoal(!0),a.SetupKickoff()}}(jQuery);var gameStorage={storageAvailable:function(e){try{var a=window[e],o="__storage_test__";return a.setItem(o,o),a.removeItem(o),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==a.length}},clearLocalStorage:function(){localStorage.clear(),console.log("STORAGE CLEARED!")},populateStorage:function(e,a){localStorage.setItem(e,a),console.log(e+" saved a value of "+a)},getStorage:function(e){return localStorage.getItem(e)},getArrayStorage:function(e){return JSON.parse(localStorage.getItem(e))},saveGetData:function(e,a,o){o||!localStorage.getItem(e)?(gameStorage.populateStorage(e,a),console.log("item: %s, data: %s",e,a)):localStorage.getItem(e)&&gameStorage.getStorage(e)},getAllStorage:function(){console.log("========STORAGE=========");let e=gameStorage.getStorage("currentQuarter"),a=gameStorage.getStorage("currentDown"),o=gameStorage.getStorage("ballSpotStart"),t=gameStorage.getStorage("yardsTraveled"),r=gameStorage.getStorage("yardsToFirst"),n=gameStorage.getStorage("currentTeamWithBall"),s=gameStorage.getArrayStorage("teamPlayHistory"),l=gameStorage.getStorage("homeTeamID"),i=gameStorage.getStorage("homeTeamTimeOuts"),c=gameStorage.getStorage("homeTeamScore"),m=gameStorage.getStorage("awayTeamID"),T=gameStorage.getStorage("awayTeamTimeOuts"),S=gameStorage.getStorage("awayTeamScore");console.log("currentQuarter: "+e),console.log("currentDown: "+a),console.log("ballSpotStart: "+o),console.log("yardsTraveled: "+t),console.log("yardsToFirst: "+r),console.log("currentTeamWithBall: "+n),console.log("teamPlayHistory ARRAY: "+s),console.log("homeTeamID: "+l),console.log("homeTeamTimeOuts: "+i),console.log("homeTeamScore: "+c),console.log("awayTeamID: "+m),console.log("awayTeamTimeOuts: "+T),console.log("awayTeamScore: "+S),console.log("========END STORAGE========="),self.currentQuarter(e),self.currentDown(a),self.ballSpotStart(o),self.yardsTraveled(t),self.yardsToFirst(r),self.currentTeamWithBall(n),s&&self.teamPlayHistory(s),self.homeTeamID(l),self.homeTeamTimeOuts(i),self.homeTeamScore(c),self.awayTeamID(m),self.awayTeamTimeOuts(T),self.awayTeamScore(S)},saveGame:function(){gameStorage.saveGetData("currentQuarter",self.currentQuarter(),!0),gameStorage.saveGetData("currentDown",self.currentDown(),!0),gameStorage.saveGetData("ballSpotStart",self.ballSpotStart(),!0),gameStorage.saveGetData("yardsTraveled",self.yardsTraveled(),!0),gameStorage.saveGetData("yardsToFirst",self.yardsToFirst(),!0),gameStorage.saveGetData("currentTeamWithBall",self.currentTeamWithBall(),!0),gameStorage.saveGetData("teamPlayHistory",JSON.stringify(self.teamPlayHistory()),!0),gameStorage.saveGetData("homeTeamID",self.homeTeamID(),!0),gameStorage.saveGetData("homeTeamTimeOuts",self.homeTeamTimeOuts(),!0),gameStorage.saveGetData("homeTeamScore",self.homeTeamScore(),!0),gameStorage.saveGetData("awayTeamID",self.awayTeamID(),!0),gameStorage.saveGetData("awayTeamTimeOuts",self.awayTeamTimeOuts(),!0),gameStorage.saveGetData("awayTeamScore",self.awayTeamScore(),!0),gameStorage.getAllStorage()},getSavedData:function(){gameStorage.storageAvailable("localStorage")?gameStorage.getAllStorage():console.log("localStorage is not available")}};!function(e){this.ResetGame=function(){gameStorage.clearLocalStorage()},this.SaveGame=function(){gameStorage.saveGame()},this.GetGameSaves=function(){gameStorage.getSavedData()}}(jQuery),$((function(){ko.applyBindings()}));